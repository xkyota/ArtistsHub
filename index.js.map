{"version":3,"file":"index.js","sources":["../src/js/artists-section.js","../src/js/artist-details-domal.js","../src/js/about-us-section.js","../src/js/feedback-section.js"],"sourcesContent":["export const artistIDs = [];\nlet currentPage = 1;\nconst LIMIT = 8;\n\nconst refs = {\n  cardsContainer: document.querySelector('.block-artist__list'),\n  loadMoreBtn: document.querySelector('.block-artist-wrapper__button'),\n};\n\nrefs.loadMoreBtn.classList.remove('hidden');\n\nasync function fetchArtists(page = 1, limit = LIMIT) {\n  const response = await fetch(`https://sound-wave.b.goit.study/api/artists?page=${page}&limit=${limit}`);\n  if (!response.ok) throw new Error('Error: ' + response.status);\n  return response.json();\n}\n\nfunction renderArtists(artists, container) {\n  artists.forEach(artist => {\n    artistIDs.push(artist._id);\n\n    const genresMarkup = artist.genres\n      .map(genre => `<span class=\"block-artist-list-item-wrapper-text__span\">${genre}</span>`)\n      .join('');\n\n    const bioShort = artist.strBiographyEN.length > 200\n      ? artist.strBiographyEN.slice(0, 200) + '...'\n      : artist.strBiographyEN;\n\n    container.insertAdjacentHTML(\n      'beforeend',\n      `\n      <li class=\"block-artist-list__item\">\n        <div class=\"block-artist-list-item__wrapper-icon\">\n          <img src=\"${artist.strArtistThumb}\" alt=\"${artist.strArtist}\" class=\"block-artist-list-wrapper__icon\" width=\"672\" height=\"432\">\n        </div>\n        <div class=\"block-artist-list-item__wrapper-text\">\n          ${genresMarkup}\n        </div>\n        <h2 class=\"block-artist-list-item__title\">${artist.strArtist}</h2>\n        <p class=\"block-artist-list-item__paragraph\">${bioShort}</p>\n        <button class=\"block-artist-list-item__button\" data-id=\"${artist._id}\">\n          Learn More <img src=\"./img/artist-section/arrow-right.svg\" alt=\"arrow-right\">\n        </button>\n      </li>\n      `\n    );\n  });\n}\n\nasync function onLoadMoreBtnClick(event) {\n  event.target.blur();\n  currentPage++;\n  \n  try {\n    const { artists, totalArtists } = await fetchArtists(currentPage, LIMIT);\n    renderArtists(artists, refs.cardsContainer);\n\n    const firstNewCard = refs.cardsContainer.lastElementChild;\n    await new Promise(resolve => setTimeout(resolve, 100));\n    const cardHeight = firstNewCard.getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 1, behavior: 'smooth' });\n\n    const totalPages = Math.ceil(totalArtists / LIMIT);\n    if (currentPage >= totalPages) {\n      iziToast.info({\n        title: '',\n        message: 'Ви, передивились всіх артистів.',\n        position: 'topRight',\n        timeout: 4000,\n        titleColor: '#fff',\n        backgroundColor: '#764191',\n        messageColor: '#fff',\n      });\n      refs.loadMoreBtn.classList.add('hidden');\n      refs.loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.error(err);\n  }\n}\n\n(async () => {\n  try {\n    const { artists, totalArtists } = await fetchArtists(currentPage, LIMIT);\n    renderArtists(artists, refs.cardsContainer);\n\n    const totalPages = Math.ceil(totalArtists / LIMIT);\n    if (currentPage >= totalPages) {\n      refs.loadMoreBtn.classList.add('hidden');\n    } else {\n      refs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.error(err);\n  }\n})();\n","const modal = document.getElementById('artistModal');\nconst closeBtn = modal?.querySelector('.close-btn');\n\ndocument.addEventListener('click', async event => {\n  const btn = event.target.closest('.block-artist-list-item__button');\n  if (!btn) return;\n\n  const id = btn.dataset.id;\n  if (!id) {\n    console.warn('Кнопка не має data-id');\n    return;\n  }\n\n  try {\n    const res = await fetch(`https://sound-wave.b.goit.study/api/artists/${id}`);\n    const data = await res.json();\n    const artist = data.artists?.[0] || data;\n\n    if (!artist || !artist.strArtist) {\n      console.warn('Немає даних щодо артиста:', data);\n      return;\n    }\n    document.querySelector('.artist-name').textContent = artist.strArtist || '';\n    document.querySelector('.artist-bio-text').textContent = artist.strBiographyEN || '';\n    document.querySelector('.artist-image').src = artist.strArtistThumb || '';\n    document.querySelector('.artist-years-active').textContent = artist.intFormedYear || '—';\n    document.querySelector('.artist-sex').textContent = artist.strGender || '—';\n    document.querySelector('.artist-members').textContent = artist.intMembers || '—';\n    document.querySelector('.artist-country').textContent = artist.strCountry || '—';\n\n    const genresContainer = document.querySelector('.artist-genres');\n    genresContainer.innerHTML = '';\n    artist.genres?.forEach(genre => {\n      const genreBtn = document.createElement('button');\n      genreBtn.className = 'ganre-btn';\n      genreBtn.textContent = genre;\n      genresContainer.appendChild(genreBtn);\n    });\n\n    modal.style.display = 'flex';\n    document.body.style.overflow = 'hidden';\n\n  } catch (error) {\n    console.error('Помилка при завантаженні даних про артиста:', error);\n  }\n});\n\ncloseBtn?.addEventListener('click', () => {\n  modal.style.display = 'none';\n  document.body.style.overflow = '';\n});\n","const block = document.querySelector('.block2__about');\nconst image = document.querySelector('.img__about');\n\nconst observerSettings = {\n    threshold: 0.2,\n}\n\nconst observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n        if (!entry.isIntersecting) return;\n        const el = entry.target;\n        if (el === image) {\n            el.src = el.dataset.src;\n            el.classList.add('added');\n        }\n        if (el === block) {\n            el.classList.add('animated');\n        }\n        observer.unobserve(el);\n    });\n}, observerSettings);\n\nif (block) observer.observe(block);\nif (image) observer.observe(image);","const feedback = document.querySelector('.feedback');\n\nfetch('https://sound-wave.b.goit.study/api/feedbacks')\n  .then(response => response.json())\n  .then(data => {\n    const filteredFeedbacks = data.data.filter(isValidFeedback);\n\n    filteredFeedbacks.forEach(element => {\n      feedback.insertAdjacentHTML(\n        'beforeend',\n        `  <div class=\"feedback-item swiper-slide\">\n              <div class=\"stars\">\n                <span class=\"star\" data-value=\"1\"></span>\n                <span class=\"star\" data-value=\"2\"></span>\n                <span class=\"star\" data-value=\"3\"></span>\n                <span class=\"star\" data-value=\"4\"></span>\n                <span class=\"star\" data-value=\"5\"></span>\n              </div>\n              <p class=\"item-coment\">${element.descr}</p>\n              <p class=\"item-person\">${element.name}</p>\n           </div> `\n      );\n\n      const lastItem = feedback.lastElementChild;\n      fillStars(lastItem, element.rating);\n    });\n\n    const swiper = new Swiper('.swiper', {\n      loop: true,\n      pagination: {\n        el: '.swiper-pagination',\n      },\n      slidesPerView: 1,\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n      scrollbar: {\n        el: '.swiper-scrollbar',\n      },\n    });\n  })\n  .catch(error => {\n    console.log(error);\n  });\n\nfunction fillStars(container, rating) {\n  const stars = container.querySelectorAll('.star');\n\n  stars.forEach((star, index) => {\n    let fillPercent = 0;\n\n    if (index + 1 <= rating) {\n      fillPercent = 100;\n    } else if (index < rating) {\n      const decimal = rating - index;\n      fillPercent = Math.round(decimal * 100);\n    }\n\n    star.style.setProperty('--fill', `${fillPercent}%`);\n  });\n}\n\nfunction isValidFeedback(feedback) {\n  if (!feedback.descr || !feedback.name) return false;\n\n  const description = feedback.descr.trim();\n  const wordCount = description.split(/\\s+/).length;\n  const charCount = description.length;\n\n  const onlyNormalChars = /^[a-zA-Zа-яА-ЯіїєґІЇЄҐ0-9\\s.,!?'\"()\\-–—…]+$/.test(\n    description\n  );\n  const noSpamWords =\n    !/(test|asdf|qwer|123|lorem|fake|gghhh|ддд|аааа|яяяя)/i.test(description);\n  const ratingIsHigh = feedback.rating >= 4;\n\n  return (\n    wordCount >= 5 &&\n    charCount >= 30 &&\n    onlyNormalChars &&\n    noSpamWords &&\n    ratingIsHigh\n  );\n}"],"names":["artistIDs","currentPage","LIMIT","refs","fetchArtists","page","limit","response","renderArtists","artists","container","artist","genresMarkup","genre","bioShort","onLoadMoreBtnClick","event","totalArtists","firstNewCard","resolve","cardHeight","totalPages","err","modal","closeBtn","btn","id","data","_a","genresContainer","_b","genreBtn","error","block","image","observerSettings","observer","entries","entry","el","feedback","isValidFeedback","element","lastItem","fillStars","rating","star","index","fillPercent","decimal","description","wordCount","charCount","onlyNormalChars","noSpamWords","ratingIsHigh"],"mappings":"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"}